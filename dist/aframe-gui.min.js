!function(t){function e(o){if(i[o])return i[o].exports;var r=i[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=17)}([function(t,e,i){"use strict";window.normalYPosition=1.5,window.hiddenYPosition=1e3,window.key_orange="#ed5b21",window.key_orange_light="#ef8c60",window.key_grey="#22252a",window.key_grey_dark="#2c3037",window.key_grey_light="#606876",window.key_offwhite="#d3d3d4",window.key_white="#fff",window.icon_font={alert:"","alert-circled":"","android-add":"","android-add-circle":"","android-alarm-clock":"","android-alert":"","android-apps":"","android-archive":"","android-arrow-back":"","android-arrow-down":"","android-arrow-dropdown":"","android-arrow-dropdown-circle":"","android-arrow-dropleft":"","android-arrow-dropleft-circle":"","android-arrow-dropright":"","android-arrow-dropright-circle":"","android-arrow-dropup":"","android-arrow-dropup-circle":"","android-arrow-forward":"","android-arrow-up":"","android-attach":"","android-bar":"","android-bicycle":"","android-boat":"","android-bookmark":"","android-bulb":"","android-bus":"","android-calendar":"","android-call":"","android-camera":"","android-cancel":"","android-car":"","android-cart":"","android-chat":"","android-checkbox":"","android-checkbox-blank":"","android-checkbox-outline":"","android-checkbox-outline-blank":"","android-checkmark-circle":"","android-clipboard":"","android-close":"","android-cloud":"","android-cloud-circle":"","android-cloud-done":"","android-cloud-outline":"","android-color-palette":"","android-compass":"","android-contact":"","android-contacts":"","android-contract":"","android-create":"","android-delete":"","android-desktop":"","android-document":"","android-done":"","android-done-all":"","android-download":"","android-drafts":"","android-exit":"","android-expand":"","android-favorite":"","android-favorite-outline":"","android-film":"","android-folder":"","android-folder-open":"","android-funnel":"","android-globe":"","android-hand":"","android-hangout":"","android-happy":"","android-home":"","android-image":"","android-laptop":"","android-list":"","android-locate":"","android-lock":"","android-mail":"","android-map":"","android-menu":"","android-microphone":"","android-microphone-off":"","android-more-horizontal":"","android-more-vertical":"","android-navigate":"","android-notifications":"","android-notifications-none":"","android-notifications-off":"","android-open":"","android-options":"","android-people":"","android-person":"","android-person-add":"","android-phone-landscape":"","android-phone-portrait":"","android-pin":"","android-plane":"","android-playstore":"","android-print":"","android-radio-button-off":"","android-radio-button-on":"","android-refresh":"","android-remove":"","android-remove-circle":"","android-restaurant":"","android-sad":"","android-search":"","android-send":"","android-settings":"","android-share":"","android-share-alt":"","android-star":"","android-star-half":"","android-star-outline":"","android-stopwatch":"","android-subway":"","android-sunny":"","android-sync":"","android-textsms":"","android-time":"","android-train":"","android-unlock":"","android-upload":"","android-volume-down":"","android-volume-mute":"","android-volume-off":"","android-volume-up":"","android-walk":"","android-warning":"","android-watch":"","android-wifi":"",aperture:"",archive:"","arrow-down-a":"","arrow-down-b":"","arrow-down-c":"","arrow-expand":"","arrow-graph-down-left":"","arrow-graph-down-right":"","arrow-graph-up-left":"","arrow-graph-up-right":"","arrow-left-a":"","arrow-left-b":"","arrow-left-c":"","arrow-move":"","arrow-resize":"","arrow-return-left":"","arrow-return-right":"","arrow-right-a":"","arrow-right-b":"","arrow-right-c":"","arrow-shrink":"","arrow-swap":"","arrow-up-a":"","arrow-up-b":"","arrow-up-c":"",asterisk:"",at:"",backspace:"","backspace-outline":"",bag:"","battery-charging":"","battery-empty":"","battery-full":"","battery-half":"","battery-low":"",beaker:"",beer:"",bluetooth:"",bonfire:"",bookmark:"",bowtie:"",briefcase:"",bug:"",calculator:"",calendar:"",camera:"",card:"",cash:"",chatbox:"","chatbox-working":"",chatboxes:"",chatbubble:"","chatbubble-working":"",chatbubbles:"",checkmark:"","checkmark-circled":"","checkmark-round":"","chevron-down":"","chevron-left":"","chevron-right":"","chevron-up":"",clipboard:"",clock:"",close:"","close-circled":"","close-round":"","closed-captioning":"",cloud:"",code:"","code-download":"","code-working":"",coffee:"",compass:"",compose:"","connection-bars":"",contrast:"",crop:"",cube:"",disc:"",document:"","document-text":"",drag:"",earth:"",easel:"",edit:"",egg:"",eject:"",email:"","email-unread":"","erlenmeyer-flask":"","erlenmeyer-flask-bubbles":"",eye:"","eye-disabled":"",female:"",filing:"","film-marker":"",fireball:"",flag:"",flame:"",flash:"","flash-off":"",folder:"",fork:"","fork-repo":"",forward:"",funnel:"","gear-a":"","gear-b":"",grid:"",hammer:"",happy:"","happy-outline":"",headphone:"",heart:"","heart-broken":"",help:"","help-buoy":"","help-circled":"",home:"",icecream:"",image:"",images:"",information:"","information-circled":"",ionic:"","ios-alarm":"","ios-alarm-outline":"","ios-albums":"","ios-albums-outline":"","ios-americanfootball":"","ios-americanfootball-outline":"","ios-analytics":"","ios-analytics-outline":"","ios-arrow-back":"","ios-arrow-down":"","ios-arrow-forward":"","ios-arrow-left":"","ios-arrow-right":"","ios-arrow-thin-down":"","ios-arrow-thin-left":"","ios-arrow-thin-right":"","ios-arrow-thin-up":"","ios-arrow-up":"","ios-at":"","ios-at-outline":"","ios-barcode":"","ios-barcode-outline":"","ios-baseball":"","ios-baseball-outline":"","ios-basketball":"","ios-basketball-outline":"","ios-bell":"","ios-bell-outline":"","ios-body":"","ios-body-outline":"","ios-bolt":"","ios-bolt-outline":"","ios-book":"","ios-book-outline":"","ios-bookmarks":"","ios-bookmarks-outline":"","ios-box":"","ios-box-outline":"","ios-briefcase":"","ios-briefcase-outline":"","ios-browsers":"","ios-browsers-outline":"","ios-calculator":"","ios-calculator-outline":"","ios-calendar":"","ios-calendar-outline":"","ios-camera":"","ios-camera-outline":"","ios-cart":"","ios-cart-outline":"","ios-chatboxes":"","ios-chatboxes-outline":"","ios-chatbubble":"","ios-chatbubble-outline":"","ios-checkmark":"","ios-checkmark-empty":"","ios-checkmark-outline":"","ios-circle-filled":"","ios-circle-outline":"","ios-clock":"","ios-clock-outline":"","ios-close":"","ios-close-empty":"","ios-close-outline":"","ios-cloud":"","ios-cloud-download":"","ios-cloud-download-outline":"","ios-cloud-outline":"","ios-cloud-upload":"","ios-cloud-upload-outline":"","ios-cloudy":"","ios-cloudy-night":"","ios-cloudy-night-outline":"","ios-cloudy-outline":"","ios-cog":"","ios-cog-outline":"","ios-color-filter":"","ios-color-filter-outline":"","ios-color-wand":"","ios-color-wand-outline":"","ios-compose":"","ios-compose-outline":"","ios-contact":"","ios-contact-outline":"","ios-copy":"","ios-copy-outline":"","ios-crop":"","ios-crop-strong":"","ios-download":"","ios-download-outline":"","ios-drag":"","ios-email":"","ios-email-outline":"","ios-eye":"","ios-eye-outline":"","ios-fastforward":"","ios-fastforward-outline":"","ios-filing":"","ios-filing-outline":"","ios-film":"","ios-film-outline":"","ios-flag":"","ios-flag-outline":"","ios-flame":"","ios-flame-outline":"","ios-flask":"","ios-flask-outline":"","ios-flower":"","ios-flower-outline":"","ios-folder":"","ios-folder-outline":"","ios-football":"","ios-football-outline":"","ios-game-controller-a":"","ios-game-controller-a-outline":"","ios-game-controller-b":"","ios-game-controller-b-outline":"","ios-gear":"","ios-gear-outline":"","ios-glasses":"","ios-glasses-outline":"","ios-grid-view":"","ios-grid-view-outline":"","ios-heart":"","ios-heart-outline":"","ios-help":"","ios-help-empty":"","ios-help-outline":"","ios-home":"","ios-home-outline":"","ios-infinite":"","ios-infinite-outline":"","ios-information":"","ios-information-empty":"","ios-information-outline":"","ios-ionic-outline":"","ios-keypad":"","ios-keypad-outline":"","ios-lightbulb":"","ios-lightbulb-outline":"","ios-list":"","ios-list-outline":"","ios-location":"","ios-location-outline":"","ios-locked":"","ios-locked-outline":"","ios-loop":"","ios-loop-strong":"","ios-medical":"","ios-medical-outline":"","ios-medkit":"","ios-medkit-outline":"","ios-mic":"","ios-mic-off":"","ios-mic-outline":"","ios-minus":"","ios-minus-empty":"","ios-minus-outline":"","ios-monitor":"","ios-monitor-outline":"","ios-moon":"","ios-moon-outline":"","ios-more":"","ios-more-outline":"","ios-musical-note":"","ios-musical-notes":"","ios-navigate":"","ios-navigate-outline":"","ios-nutrition":"","ios-nutrition-outline":"","ios-paper":"","ios-paper-outline":"","ios-paperplane":"","ios-paperplane-outline":"","ios-partlysunny":"","ios-partlysunny-outline":"","ios-pause":"","ios-pause-outline":"","ios-paw":"","ios-paw-outline":"","ios-people":"","ios-people-outline":"","ios-person":"","ios-person-outline":"","ios-personadd":"","ios-personadd-outline":"","ios-photos":"","ios-photos-outline":"","ios-pie":"","ios-pie-outline":"","ios-pint":"","ios-pint-outline":"","ios-play":"","ios-play-outline":"","ios-plus":"","ios-plus-empty":"","ios-plus-outline":"","ios-pricetag":"","ios-pricetag-outline":"","ios-pricetags":"","ios-pricetags-outline":"","ios-printer":"","ios-printer-outline":"","ios-pulse":"","ios-pulse-strong":"","ios-rainy":"","ios-rainy-outline":"","ios-recording":"","ios-recording-outline":"","ios-redo":"","ios-redo-outline":"","ios-refresh":"","ios-refresh-empty":"","ios-refresh-outline":"","ios-reload":"","ios-reverse-camera":"","ios-reverse-camera-outline":"","ios-rewind":"","ios-rewind-outline":"","ios-rose":"","ios-rose-outline":"","ios-search":"","ios-search-strong":"","ios-settings":"","ios-settings-strong":"","ios-shuffle":"","ios-shuffle-strong":"","ios-skipbackward":"","ios-skipbackward-outline":"","ios-skipforward":"","ios-skipforward-outline":"","ios-snowy":"","ios-speedometer":"","ios-speedometer-outline":"","ios-star":"","ios-star-half":"","ios-star-outline":"","ios-stopwatch":"","ios-stopwatch-outline":"","ios-sunny":"","ios-sunny-outline":"","ios-telephone":"","ios-telephone-outline":"","ios-tennisball":"","ios-tennisball-outline":"","ios-thunderstorm":"","ios-thunderstorm-outline":"","ios-time":"","ios-time-outline":"","ios-timer":"","ios-timer-outline":"","ios-toggle":"","ios-toggle-outline":"","ios-trash":"","ios-trash-outline":"","ios-undo":"","ios-undo-outline":"","ios-unlocked":"","ios-unlocked-outline":"","ios-upload":"","ios-upload-outline":"","ios-videocam":"","ios-videocam-outline":"","ios-volume-high":"","ios-volume-low":"","ios-wineglass":"","ios-wineglass-outline":"","ios-world":"","ios-world-outline":"",ipad:"",iphone:"",ipod:"",jet:"",key:"",knife:"",laptop:"",leaf:"",levels:"",lightbulb:"",link:"","load-a":"","load-b":"","load-c":"","load-d":"",location:"","lock-combination":"",locked:"","log-in":"","log-out":"",loop:"",magnet:"",male:"",man:"",map:"",medkit:"",merge:"","mic-a":"","mic-b":"","mic-c":"",minus:"","minus-circled":"","minus-round":"","model-s":"",monitor:"",more:"",mouse:"","music-note":"",navicon:"","navicon-round":"",navigate:"",network:"","no-smoking":"",nuclear:"",outlet:"",paintbrush:"",paintbucket:"","paper-airplane":"",paperclip:"",pause:"",person:"","person-add":"","person-stalker":"","pie-graph":"",pin:"",pinpoint:"",pizza:"",plane:"",planet:"",play:"",playstation:"",plus:"","plus-circled":"","plus-round":"",podium:"",pound:"",power:"",pricetag:"",pricetags:"",printer:"","pull-request":"","qr-scanner":"",quote:"","radio-waves":"",record:"",refresh:"",reply:"","reply-all":"","ribbon-a":"","ribbon-b":"",sad:"","sad-outline":"",scissors:"",search:"",settings:"",share:"",shuffle:"","skip-backward":"","skip-forward":"","social-android":"","social-android-outline":"","social-angular":"","social-angular-outline":"","social-apple":"","social-apple-outline":"","social-bitcoin":"","social-bitcoin-outline":"","social-buffer":"","social-buffer-outline":"","social-chrome":"","social-chrome-outline":"","social-codepen":"","social-codepen-outline":"","social-css3":"","social-css3-outline":"","social-designernews":"","social-designernews-outline":"","social-dribbble":"","social-dribbble-outline":"","social-dropbox":"","social-dropbox-outline":"","social-euro":"","social-euro-outline":"","social-facebook":"","social-facebook-outline":"","social-foursquare":"","social-foursquare-outline":"","social-freebsd-devil":"","social-github":"","social-github-outline":"","social-google":"","social-google-outline":"","social-googleplus":"","social-googleplus-outline":"","social-hackernews":"","social-hackernews-outline":"","social-html5":"","social-html5-outline":"","social-instagram":"","social-instagram-outline":"","social-javascript":"","social-javascript-outline":"","social-linkedin":"","social-linkedin-outline":"","social-markdown":"","social-nodejs":"","social-octocat":"","social-pinterest":"","social-pinterest-outline":"","social-python":"","social-reddit":"","social-reddit-outline":"","social-rss":"","social-rss-outline":"","social-sass":"","social-skype":"","social-skype-outline":"","social-snapchat":"","social-snapchat-outline":"","social-tumblr":"","social-tumblr-outline":"","social-tux":"","social-twitch":"","social-twitch-outline":"","social-twitter":"","social-twitter-outline":"","social-usd":"","social-usd-outline":"","social-vimeo":"","social-vimeo-outline":"","social-whatsapp":"","social-whatsapp-outline":"","social-windows":"","social-windows-outline":"","social-wordpress":"","social-wordpress-outline":"","social-yahoo":"","social-yahoo-outline":"","social-yen":"","social-yen-outline":"","social-youtube":"","social-youtube-outline":"","soup-can":"","soup-can-outline":"",speakerphone:"",speedometer:"",spoon:"",star:"","stats-bars":"",steam:"",stop:"",thermometer:"",thumbsdown:"",thumbsup:"",toggle:"","toggle-filled":"",transgender:"","trash-a":"","trash-b":"",trophy:"",tshirt:"","tshirt-outline":"",umbrella:"",university:"",unlocked:"",upload:"",usb:"",videocamera:"","volume-high":"","volume-low":"","volume-medium":"","volume-mute":"",wand:"",waterdrop:"",wifi:"",wineglass:"",woman:"",wrench:"",xbox:""},window.getUniqueId=function(t){return t+"_"+(new Date).getTime().toString()+Math.random().toString().replace(".","")},window.getTextWidth=function(t,e){var i=getTextWidth.canvas||(getTextWidth.canvas=document.createElement("canvas")),o=i.getContext("2d");return o.font=e,o.measureText(t).width},window.drawText=function(t,e,i,o,r,a){setTimeout(function(){t.font=o,t.fillStyle=r,t.textAlign="center",t.textBaseline="middle",t.shadowColor="rgba(0,0,0,0.5)",t.shadowBlur=8,t.shadowOffsetY=0,t.shadowOffsetX=0,t.scale(1,1),t.clearRect(0,0,e.width,e.height);var a=i+"";if(a.match("char#")){var n=a.substring(a.indexOf("#")+1);t.fillText(String.fromCharCode(n),e.width/2,e.height/2)}else t.fillText(a,e.width/2,e.height/2)},500)},window.drawIcon=function(t,e,i,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;setTimeout(function(){t.font="240px Ionicons",t.fillStyle=o,t.textAlign="center",t.textBaseline="middle",t.shadowColor="rgba(0,0,0,0.5)",t.shadowBlur=8,t.shadowOffsetY=0,t.shadowOffsetX=0,t.clearRect(0,0,e.width,e.height),t.scale(r,r),console.log("icon"+i),icon_font[i]?t.fillText(icon_font[i],e.width/2,e.height/2):t.fillText("?",e.width/2,e.height/2)},500)},window.drawLabel=function(t,e,i,o,r,a){setTimeout(function(){t.font=o,t.fillStyle=r,t.textAlign="left",t.textBaseline="middle",t.shadowColor="rgba(0,0,0,0.5)",t.shadowBlur=8,t.shadowOffsetY=0,t.shadowOffsetX=0,t.clearRect(0,0,e.width,e.height),t.scale(1,1),t.fillText(i,e.height/8,e.height/2)},500)}},function(t,e,i){"use strict";AFRAME.registerComponent("gui-button",{schema:{on:{default:"click"},toggle:{type:"boolean",default:!1},text:{type:"string",default:"text"},fontFamily:{type:"string",default:"Helvetica"},fontColor:{type:"string",default:key_offwhite},borderColor:{type:"string",default:key_offwhite},backgroundColor:{type:"string",default:key_grey},hoverColor:{type:"string",default:key_grey_dark},activeColor:{type:"string",default:key_orange}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item");console.log("in button, guiItem: "+JSON.stringify(i));var o=e.getAttribute("gui-interactable");console.log("in button, guiInteractable: "+JSON.stringify(o));var r=350,a=i.width*r,n=i.height*r,l=(this.toggleState=t.toggle,document.createElement("div"));l.setAttribute("class","visuallyhidden"),document.body.appendChild(l),console.log("in gui-button init, data: "+JSON.stringify(t));var s=document.createElement("canvas");this.canvas=s,s.setAttribute("width",a),s.setAttribute("height",n),s.id=getUniqueId("canvas"),l.appendChild(s);var u=this.ctx=s.getContext("2d");e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.width+";"),e.setAttribute("material","shader: flat; transparent: true; opacity: 0.5; side:double; color:"+t.backgroundColor+";"),drawText(u,s,t.text,i.fontSize+" "+t.fontFamily,t.fontColor,1);var d=document.createElement("a-entity");d.setAttribute("geometry","primitive: box; width: "+i.width+"; height: "+i.height+"; depth: 0.02;"),d.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),d.setAttribute("rotation","0 0 0"),d.setAttribute("position","0 0 0.01"),e.appendChild(d);var c=document.createElement("a-entity");c.setAttribute("geometry","primitive: box; width: "+(i.width-.025)+"; height: "+(i.height-.025)+"; depth: 0.04;"),c.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.backgroundColor),c.setAttribute("rotation","0 0 0"),c.setAttribute("position","0 0 0.02"),e.appendChild(c),this.buttonEntity=c;var g=document.createElement("a-animation");g.setAttribute("attribute","material.color"),g.setAttribute("begin","fadeOut"),g.setAttribute("from",t.activeColor),g.setAttribute("to",t.backgroundColor),g.setAttribute("dur","400"),c.appendChild(g);var h=document.createElement("a-entity");h.setAttribute("geometry","primitive: plane; width: "+i.width/1.05+"; height: "+i.height/1.05+";"),h.setAttribute("material","shader: flat; src: #"+s.id+"; transparent: true; opacity: 1; side:front;"),h.setAttribute("position","0 0 0.041"),e.appendChild(h),e.setAttribute("role","button"),e.addEventListener("mouseenter",function(){c.setAttribute("material","color",t.hoverColor)}),e.addEventListener("mouseleave",function(){t.toggle||c.setAttribute("material","color",t.backgroundColor)}),e.addEventListener(t.on,function(e){t.toggle?c.setAttribute("material","color",t.activeColor):c.emit("fadeOut");var i=o.clickAction;console.log("in button, clickActionFunctionName: "+i);var r=window[i];"function"==typeof r&&r()})},play:function(){},update:function(t){console.log("In button update, toggle: "+this.toggleState)},setActiveState:function(t){console.log("in setActiveState function"),this.data.toggle=this.toggleState=t,t||this.buttonEntity.setAttribute("material","color",this.data.backgroundColor)},setText:function(t){var e=this.el.getAttribute("gui-item");drawText(this.ctx,this.canvas,t,e.fontSize+" "+this.data.fontFamily,this.data.fontColor,1)}}),AFRAME.registerPrimitive("a-gui-button",{defaultComponents:{"gui-interactable":{},"gui-item":{type:"button"},"gui-button":{}},mappings:{onclick:"gui-interactable.clickAction",onhover:"gui-interactable.hoverAction","key-code":"gui-interactable.keyCode",width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin","font-size":"gui-item.fontSize",on:"gui-button.on",value:"gui-button.text","font-color":"gui-button.fontColor","font-family":"gui-button.fontFamily","border-color":"gui-button.borderColor","background-color":"gui-button.backgroundColor","hover-color":"gui-button.hoverColor","active-color":"gui-button.activeColor",toggle:"gui-button.toggle"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-circle-loader",{schema:{count:{type:"number",default:"100"},fontFamily:{type:"string",default:"Helvetica"},fontColor:{type:"string",default:key_grey},backgroundColor:{type:"string",default:key_offwhite},activeColor:{type:"string",default:key_orange}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item"),o=350,r=i.height*o,a=i.height*o,n=document.createElement("div");n.setAttribute("class","visuallyhidden"),document.body.appendChild(n);var l=document.createElement("canvas");this.canvas=l,l.className="visuallyhidden",l.setAttribute("width",r),l.setAttribute("height",a),l.className="visuallyhidden",l.id=getUniqueId("canvas"),n.appendChild(l);var s=this.ctx=l.getContext("2d");e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.height+";"),e.setAttribute("material","shader: flat; transparent: true; opacity: 1; side:back; color:"+t.backgroundColor+";"),drawText(s,l,t.count+"%",i.fontSize+" "+t.fontFamily,t.fontColor,1);var u=document.createElement("a-entity");u.setAttribute("geometry","primitive: cylinder; radius: "+i.height/2+"; height: 0.02;"),u.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.backgroundColor),u.setAttribute("rotation","90 0 0"),u.setAttribute("position","0 0 0.01"),e.appendChild(u);var d=document.createElement("a-ring");d.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.activeColor),d.setAttribute("radius-inner",""+i.height/3),d.setAttribute("radius-outer",""+i.height/2),d.setAttribute("theta-start","90"),d.setAttribute("theta-length","10"),d.setAttribute("rotation","0 0 0"),d.setAttribute("position","0 0 0.04"),d.id="loader_ring",e.appendChild(d);var c=document.createElement("a-entity");c.setAttribute("geometry","primitive: plane; width: "+i.height/1.75+"; height: "+i.height/1.75+";"),c.setAttribute("material","shader: flat; src: #"+l.id+"; transparent: true; opacity: 1; side:front;"),c.setAttribute("position","0 0 0.022"),c.id="loader_ring_count",e.appendChild(c)},play:function(){},update:function(t){}}),AFRAME.registerPrimitive("a-gui-circle-loader",{defaultComponents:{"gui-item":{type:"circle-loader"},"gui-circle-loader":{}},mappings:{width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin","font-size":"gui-item.fontSize",count:"gui-circle-loader.count","font-family":"gui-circle-loader.fontFamily","font-color":"gui-circle-loader.fontColor","background-color":"gui-circle-loader.backgroundColor","active-color":"gui-circle-loader.activeColor"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-circle-timer",{schema:{countDown:{type:"number",default:"10"},fontFamily:{type:"string",default:"Helvetica"},fontColor:{type:"string",default:key_grey},borderColor:{type:"string",default:key_grey},backgroundColor:{type:"string",default:key_offwhite},activeColor:{type:"string",default:key_orange}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item"),o=350,r=i.height*o,a=i.height*o,n=document.createElement("div");n.setAttribute("class","visuallyhidden"),document.body.appendChild(n);var l=document.createElement("canvas");this.canvas=l,l.className="visuallyhidden",l.setAttribute("width",r),l.setAttribute("height",a),l.className="visuallyhidden",l.id=getUniqueId("canvas"),n.appendChild(l);var s=this.ctx=l.getContext("2d");e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.height+";"),e.setAttribute("material","shader: flat; transparent: true; opacity: 1; side:back; color:"+t.backgroundColor+";"),drawText(s,l,t.countDown,i.fontSize+" "+t.fontFamily,t.fontColor,1);var u=document.createElement("a-entity");u.setAttribute("geometry","primitive: cylinder; radius: "+i.height/2+"; height: 0.02;"),u.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.backgroundColor),u.setAttribute("rotation","90 0 0"),u.setAttribute("position","0 0 0.01"),e.appendChild(u);var d=document.createElement("a-ring");d.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),d.setAttribute("radius-inner",""+i.height/3),d.setAttribute("radius-outer",""+i.height/2),d.setAttribute("theta-start","-1"),d.setAttribute("theta-length","3"),d.setAttribute("position","0 0 0.04"),e.appendChild(d);var c=document.createElement("a-ring");c.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),c.setAttribute("radius-inner",""+i.height/3),c.setAttribute("radius-outer",""+i.height/2),c.setAttribute("theta-start","89"),c.setAttribute("theta-length","3"),c.setAttribute("position","0 0 0.04"),e.appendChild(c);var g=document.createElement("a-ring");g.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),g.setAttribute("radius-inner",""+i.height/3),g.setAttribute("radius-outer",""+i.height/2),g.setAttribute("theta-start","179"),g.setAttribute("theta-length","3"),g.setAttribute("position","0 0 0.04"),e.appendChild(g);var h=document.createElement("a-ring");h.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),h.setAttribute("radius-inner",""+i.height/3),h.setAttribute("radius-outer",""+i.height/2),h.setAttribute("theta-start","269"),h.setAttribute("theta-length","3"),h.setAttribute("position","0 0 0.04"),e.appendChild(h);var b=document.createElement("a-ring");b.setAttribute("material","shader: flat; opacity: 0.75; side:double; color: "+t.activeColor),b.setAttribute("radius-inner",""+i.height/3),b.setAttribute("radius-outer",""+i.height/2),b.setAttribute("theta-start","0"),b.setAttribute("theta-length","10"),b.setAttribute("rotation","0 0 0"),b.setAttribute("position","0 0 0.03"),b.id="loader_ring",e.appendChild(b);var m=document.createElement("a-entity");m.setAttribute("geometry","primitive: plane; width: "+i.height/1.75+"; height: "+i.height/1.75+";"),m.setAttribute("material","shader: flat; src: #"+l.id+"; transparent: true; opacity: 1; side:front;"),m.setAttribute("position","0 0 0.022"),m.id="loader_ring_count",e.appendChild(m)},play:function(){},update:function(t){}}),AFRAME.registerPrimitive("a-gui-circle-timer",{defaultComponents:{"gui-item":{type:"circle-timer"},"gui-circle-timer":{}},mappings:{width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin","font-size":"gui-item.fontSize","count-down":"gui-circle-timer.countDown","font-family":"gui-circle-timer.fontFamily","font-color":"gui-circle-timer.fontColor","border-color":"gui-circle-timer.borderColor","background-color":"gui-circle-timer.backgroundColor","active-color":"gui-circle-timer.activeColor"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-cursor",{schema:{color:{type:"string",default:key_white},hoverColor:{type:"string",default:key_white},activeColor:{type:"string",default:key_orange},distance:{type:"number",default:-1},design:{type:"string",default:"dot"}},init:function(){var t=this.cursor=this.el.getAttribute("cursor"),e=this.fuse=t.fuse,i=t.fuseTimeout,o=this.el,r=this.data,a=200,n=i-a;if(AFRAME.utils.entity.setComponentProperty(o,"raycaster.interval","500"),console.log("fuse: "+e+", fuseTimeout: "+i),"dot"==r.design){o.setAttribute("geometry","primitive: ring; radiusInner:0.000001; radiusOuter:0.025"),o.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),o.setAttribute("position","0 0 "+r.distance);var l=document.createElement("a-animation");l.setAttribute("begin","hovergui"),l.setAttribute("easing","linear"),l.setAttribute("attribute","geometry.radiusInner"),l.setAttribute("fill","forwards"),l.setAttribute("from","0.000001"),l.setAttribute("to","0.0225"),l.setAttribute("dur",""+a),o.appendChild(l);var s=document.createElement("a-animation");s.setAttribute("begin","hovergui"),s.setAttribute("easing","linear"),s.setAttribute("attribute","geometry.radiusOuter"),s.setAttribute("fill","forwards"),s.setAttribute("from","0.025"),s.setAttribute("to","0.0275"),s.setAttribute("dur",""+a),o.appendChild(s);var u=document.createElement("a-animation");u.setAttribute("begin","hovergui"),u.setAttribute("easing","linear"),u.setAttribute("attribute","material.color"),u.setAttribute("fill","forwards"),u.setAttribute("from",""+r.color),u.setAttribute("to",""+r.hoverColor),u.setAttribute("dur",""+a),o.appendChild(u);var d=document.createElement("a-animation");d.setAttribute("begin","leavegui"),d.setAttribute("easing","linear"),d.setAttribute("attribute","geometry.radiusInner"),d.setAttribute("fill","forwards"),d.setAttribute("from","0.0225"),d.setAttribute("to","0.000001"),d.setAttribute("dur",""+a),o.appendChild(d);var c=document.createElement("a-animation");c.setAttribute("begin","leavegui"),c.setAttribute("easing","linear"),c.setAttribute("attribute","geometry.radiusOuter"),c.setAttribute("fill","forwards"),c.setAttribute("from","0.0275"),c.setAttribute("to","0.025"),c.setAttribute("dur",""+a),o.appendChild(c);var g=document.createElement("a-animation");g.setAttribute("begin","leavegui"),g.setAttribute("easing","linear"),g.setAttribute("attribute","material.color"),g.setAttribute("fill","forwards"),g.setAttribute("from",""+r.hoverColor),g.setAttribute("to",""+r.color),g.setAttribute("dur",""+a),o.appendChild(g);var h=document.createElement("a-animation");h.setAttribute("begin","click"),h.setAttribute("easing","ease-in"),h.setAttribute("attribute","scale"),h.setAttribute("fill","forwards"),h.setAttribute("from","1 1 1"),h.setAttribute("to","1.25 1.25 1.25"),h.setAttribute("dur","200"),o.appendChild(h);var b=document.createElement("a-entity");b.setAttribute("geometry","primitive: ring; radiusInner:0.0275; radiusOuter:0.03; thetaLength:360"),b.setAttribute("material","color: #000000; shader: flat; opacity:0.25;"),b.setAttribute("position","0 0 0"),o.appendChild(b),this.cursorShadow=b;var m=document.createElement("a-animation");m.setAttribute("begin","hovergui"),m.setAttribute("easing","linear"),m.setAttribute("attribute","geometry.radiusInner"),m.setAttribute("fill","forwards"),m.setAttribute("from","0.0275"),m.setAttribute("to","0.03"),m.setAttribute("dur",""+a),b.appendChild(m);var p=document.createElement("a-animation");p.setAttribute("begin","hovergui"),p.setAttribute("easing","linear"),p.setAttribute("attribute","geometry.radiusOuter"),p.setAttribute("fill","forwards"),p.setAttribute("from","0.03"),p.setAttribute("to","0.0325"),p.setAttribute("dur",""+a),b.appendChild(p);var f=document.createElement("a-animation");f.setAttribute("begin","leavegui"),f.setAttribute("easing","linear"),f.setAttribute("attribute","geometry.radiusInner"),f.setAttribute("fill","forwards"),f.setAttribute("from","0.03"),f.setAttribute("to","0.0275"),f.setAttribute("dur",""+a),b.appendChild(f);var A=document.createElement("a-animation");if(A.setAttribute("begin","leavegui"),A.setAttribute("easing","linear"),A.setAttribute("attribute","geometry.radiusOuter"),A.setAttribute("fill","forwards"),A.setAttribute("from","0.0325"),A.setAttribute("to","0.03"),A.setAttribute("dur",""+a),b.appendChild(A),e){var y=document.createElement("a-entity");y.setAttribute("geometry","primitive: ring; radiusInner:0.03; radiusOuter:0.0375; thetaLength:0"),y.setAttribute("material","color: "+r.activeColor+"; shader: flat; opacity:1;"),y.setAttribute("position","0 0 0"),o.appendChild(y),this.fuseLoader=y;var v=document.createElement("a-animation");v.setAttribute("begin","start-fusing"),v.setAttribute("easing","linear"),v.setAttribute("attribute","geometry.thetaLength"),v.setAttribute("fill","forwards"),v.setAttribute("from","0"),v.setAttribute("to","360"),v.setAttribute("delay",""+a),v.setAttribute("dur",""+n),y.appendChild(v)}}else if("ring"==r.design){o.setAttribute("geometry","primitive: ring; radiusInner:0.0225; radiusOuter:0.0275"),o.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),o.setAttribute("position","0 0 "+r.distance);var l=document.createElement("a-animation");l.setAttribute("begin","hovergui"),l.setAttribute("easing","linear"),l.setAttribute("attribute","geometry.radiusInner"),l.setAttribute("fill","forwards"),l.setAttribute("from","0.0225"),l.setAttribute("to","0.025"),l.setAttribute("dur",""+a),o.appendChild(l);var s=document.createElement("a-animation");s.setAttribute("begin","hovergui"),s.setAttribute("easing","linear"),s.setAttribute("attribute","geometry.radiusOuter"),s.setAttribute("fill","forwards"),s.setAttribute("from","0.025"),s.setAttribute("to","0.0325"),s.setAttribute("dur",""+a),o.appendChild(s);var u=document.createElement("a-animation");u.setAttribute("begin","hovergui"),u.setAttribute("easing","linear"),u.setAttribute("attribute","material.color"),u.setAttribute("fill","forwards"),u.setAttribute("from",""+r.color),u.setAttribute("to",""+r.hoverColor),u.setAttribute("dur",""+a),o.appendChild(u);var d=document.createElement("a-animation");d.setAttribute("begin","leavegui"),d.setAttribute("easing","linear"),d.setAttribute("attribute","geometry.radiusInner"),d.setAttribute("fill","forwards"),d.setAttribute("from","0.025"),d.setAttribute("to","0.0225"),d.setAttribute("dur",""+a),o.appendChild(d);var c=document.createElement("a-animation");c.setAttribute("begin","leavegui"),c.setAttribute("easing","linear"),c.setAttribute("attribute","geometry.radiusOuter"),c.setAttribute("fill","forwards"),c.setAttribute("from","0.0325"),c.setAttribute("to","0.0275"),c.setAttribute("dur",""+a),o.appendChild(c);var g=document.createElement("a-animation");g.setAttribute("begin","leavegui"),g.setAttribute("easing","linear"),g.setAttribute("attribute","material.color"),g.setAttribute("fill","forwards"),g.setAttribute("from",""+r.hoverColor),g.setAttribute("to",""+r.color),g.setAttribute("dur",""+a),o.appendChild(g);var h=document.createElement("a-animation");h.setAttribute("begin","click"),h.setAttribute("easing","ease-in"),h.setAttribute("attribute","scale"),h.setAttribute("fill","forwards"),h.setAttribute("from","1 1 1"),h.setAttribute("to","1.25 1.25 1.25"),h.setAttribute("dur","200"),o.appendChild(h);var b=document.createElement("a-entity");b.setAttribute("geometry","primitive: ring; radiusInner:0.03; radiusOuter:0.0325; thetaLength:360"),b.setAttribute("material","color: #000000; shader: flat; opacity:0.25;"),b.setAttribute("position","0 0 0"),o.appendChild(b),this.cursorShadow=b;var m=document.createElement("a-animation");m.setAttribute("begin","hovergui"),m.setAttribute("easing","linear"),m.setAttribute("attribute","geometry.radiusInner"),m.setAttribute("fill","forwards"),m.setAttribute("from","0.03"),m.setAttribute("to","0.0325"),m.setAttribute("dur",""+a),b.appendChild(m);var p=document.createElement("a-animation");p.setAttribute("begin","hovergui"),p.setAttribute("easing","linear"),p.setAttribute("attribute","geometry.radiusOuter"),p.setAttribute("fill","forwards"),p.setAttribute("from","0.0325"),p.setAttribute("to","0.0375"),p.setAttribute("dur",""+a),b.appendChild(p);var f=document.createElement("a-animation");f.setAttribute("begin","leavegui"),f.setAttribute("easing","linear"),f.setAttribute("attribute","geometry.radiusInner"),f.setAttribute("fill","forwards"),f.setAttribute("from","0.0325"),f.setAttribute("to","0.03"),f.setAttribute("dur",""+a),b.appendChild(f);var A=document.createElement("a-animation");if(A.setAttribute("begin","leavegui"),A.setAttribute("easing","linear"),A.setAttribute("attribute","geometry.radiusOuter"),A.setAttribute("fill","forwards"),A.setAttribute("from","0.0375"),A.setAttribute("to","0.0325"),A.setAttribute("dur",""+a),b.appendChild(A),e){var y=document.createElement("a-entity");y.setAttribute("geometry","primitive: ring; radiusInner:0.035; radiusOuter:0.0425; thetaLength:0"),y.setAttribute("material","color: "+r.activeColor+"; shader: flat; opacity:1;"),y.setAttribute("position","0 0 0"),o.appendChild(y),this.fuseLoader=y;var v=document.createElement("a-animation");v.setAttribute("begin","start-fusing"),v.setAttribute("easing","linear"),v.setAttribute("attribute","geometry.thetaLength"),v.setAttribute("fill","forwards"),v.setAttribute("from","0"),v.setAttribute("to","360"),v.setAttribute("delay",""+a),v.setAttribute("dur",""+n),y.appendChild(v)}}else if("reticle"==r.design){o.setAttribute("geometry","primitive: ring; radiusInner:0.000001; radiusOuter:0.0125; thetaLength:180;"),o.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),o.setAttribute("position","0 0 "+r.distance);var w=document.createElement("a-animation");w.setAttribute("begin","hovergui"),w.setAttribute("easing","linear"),w.setAttribute("attribute","material.opacity"),w.setAttribute("fill","forwards"),w.setAttribute("from","1"),w.setAttribute("to","0"),w.setAttribute("dur",""+a),o.appendChild(w);var C=document.createElement("a-animation");C.setAttribute("begin","leavegui"),C.setAttribute("easing","linear"),C.setAttribute("attribute","material.opacity"),C.setAttribute("fill","forwards"),C.setAttribute("from","0"),C.setAttribute("to","1"),C.setAttribute("dur",""+a),o.appendChild(C);var k=document.createElement("a-entity");k.setAttribute("geometry","primitive: ring; radiusInner:0.000001; radiusOuter:0.0125; thetaLength:180; thetaStart:180;"),k.setAttribute("material","color: #000000; shader: flat; opacity:0.25;"),k.setAttribute("position","0 0 0"),o.appendChild(k),this.cursorCenter=k;var E=document.createElement("a-animation");E.setAttribute("begin","hovergui"),E.setAttribute("easing","linear"),E.setAttribute("attribute","material.opacity"),E.setAttribute("fill","forwards"),E.setAttribute("from","0.25"),E.setAttribute("to","0"),E.setAttribute("dur",""+a),k.appendChild(E);var x=document.createElement("a-animation");x.setAttribute("begin","leavegui"),x.setAttribute("easing","linear"),x.setAttribute("attribute","material.opacity"),x.setAttribute("fill","forwards"),x.setAttribute("from","0"),x.setAttribute("to","0.25"),x.setAttribute("dur",""+a),k.appendChild(x);var b=document.createElement("a-entity");b.setAttribute("geometry","primitive: ring; radiusInner:0.0125; radiusOuter:0.0145"),b.setAttribute("material","color: #000000; shader: flat; opacity:0.25;"),b.setAttribute("position","0 0 0"),o.appendChild(b),this.cursorShadow=b;var _=document.createElement("a-animation");_.setAttribute("begin","hovergui"),_.setAttribute("easing","linear"),_.setAttribute("attribute","material.color"),_.setAttribute("fill","forwards"),_.setAttribute("from","#000000"),_.setAttribute("to",""+r.color),_.setAttribute("dur",""+a),b.appendChild(_);var F=document.createElement("a-animation");F.setAttribute("begin","hovergui"),F.setAttribute("easing","linear"),F.setAttribute("attribute","material.opacity"),F.setAttribute("fill","forwards"),F.setAttribute("from","0.25"),F.setAttribute("to","1"),F.setAttribute("dur",""+a),b.appendChild(F);var I=document.createElement("a-animation");I.setAttribute("begin","leavegui"),I.setAttribute("easing","linear"),I.setAttribute("attribute","material.color"),I.setAttribute("fill","forwards"),I.setAttribute("from",""+r.color),I.setAttribute("to","#000000"),I.setAttribute("dur",""+a),b.appendChild(I);var L=document.createElement("a-animation");L.setAttribute("begin","leavegui"),L.setAttribute("easing","linear"),L.setAttribute("attribute","material.opacity"),L.setAttribute("fill","forwards"),L.setAttribute("from","1"),L.setAttribute("to","0.25"),L.setAttribute("dur",""+a),b.appendChild(L);var S=document.createElement("a-entity");S.setAttribute("geometry","primitive: plane; width:0.005; height:0.005;"),S.setAttribute("material","color: #000000; shader: flat; opacity:0.25;"),S.setAttribute("position","-0.0325 0.0325 0"),o.appendChild(S),this.cursorShadowTL=S;var R=document.createElement("a-entity");R.setAttribute("geometry","primitive: plane; width:0.005; height:0.005;"),R.setAttribute("material","color: #000000; shader: flat; opacity:0.25;"),R.setAttribute("position","-0.0325 -0.0325 0"),o.appendChild(R),this.cursorShadowBL=R;var T=document.createElement("a-entity");T.setAttribute("geometry","primitive: plane; width:0.005; height:0.005;"),T.setAttribute("material","color: #000000; shader: flat; opacity:0.25;"),T.setAttribute("position","0.0325 0.0325 0"),o.appendChild(T),this.cursorShadowTR=T;var O=document.createElement("a-entity");O.setAttribute("geometry","primitive: plane; width:0.005; height:0.005;"),O.setAttribute("material","color: #000000; shader: flat; opacity:0.25;"),O.setAttribute("position","0.0325 -0.0325 0"),o.appendChild(O),this.cursorShadowBR=O;var z=document.createElement("a-entity");z.setAttribute("geometry","primitive: plane; width:0.015; height:0.0035;"),z.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),z.setAttribute("position","-0.03 0.0375 0"),o.appendChild(z),this.cursorBoundTL=z;var M=document.createElement("a-entity");M.setAttribute("geometry","primitive: plane; width:0.0035; height:0.015;"),M.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),M.setAttribute("position","-0.0375 0.03 0"),o.appendChild(M),this.cursorBoundTL2=M;var B=document.createElement("a-entity");B.setAttribute("geometry","primitive: plane; width:0.015; height:0.0035;"),B.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),B.setAttribute("position","0.03 0.0375 0"),o.appendChild(B),this.cursorBoundTR=B;var P=document.createElement("a-entity");P.setAttribute("geometry","primitive: plane; width:0.0035; height:0.015;"),P.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),P.setAttribute("position","0.0375 0.03 0"),o.appendChild(P),this.cursorBoundTR2=P;var D=document.createElement("a-entity");D.setAttribute("geometry","primitive: plane; width:0.015; height:0.0035;"),D.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),D.setAttribute("position","-0.03 -0.0375 0"),o.appendChild(D),this.cursorBoundBL=D;var H=document.createElement("a-entity");H.setAttribute("geometry","primitive: plane; width:0.0035; height:0.015;"),H.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),H.setAttribute("position","-0.0375 -0.03 0"),o.appendChild(H),this.cursorBoundBL2=H;var N=document.createElement("a-entity");N.setAttribute("geometry","primitive: plane; width:0.015; height:0.0035;"),N.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),N.setAttribute("position","0.03 -0.0375 0"),o.appendChild(N),this.cursorBoundBR=N;var j=document.createElement("a-entity");if(j.setAttribute("geometry","primitive: plane; width:0.0035; height:0.015;"),j.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),j.setAttribute("position","0.0375 -0.03 0"),o.appendChild(j),this.cursorBoundBR2=j,e){var y=document.createElement("a-entity");y.setAttribute("geometry","primitive: plane; width:0.000001; height:0.01;"),y.setAttribute("material","color: "+r.activeColor+"; shader: flat; opacity:1;"),y.setAttribute("position","0 -0.05 0"),o.appendChild(y),this.fuseLoader=y;var v=document.createElement("a-animation");v.setAttribute("begin","start-fusing"),v.setAttribute("easing","linear"),v.setAttribute("attribute","geometry.width"),v.setAttribute("fill","forwards"),v.setAttribute("from","0"),v.setAttribute("to","0.075"),v.setAttribute("delay",""+a),v.setAttribute("dur",""+n),y.appendChild(v)}}else if("cross"==r.design){o.setAttribute("geometry","primitive: ring; radiusInner:0.035; radiusOuter:0.0375"),o.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),o.setAttribute("position","0 0 "+r.distance);var l=document.createElement("a-animation");l.setAttribute("begin","hovergui"),l.setAttribute("easing","linear"),l.setAttribute("attribute","geometry.radiusInner"),l.setAttribute("fill","forwards"),l.setAttribute("from","0.035"),l.setAttribute("to","0.0315"),l.setAttribute("dur",""+a),o.appendChild(l);var d=document.createElement("a-animation");d.setAttribute("begin","leavegui"),d.setAttribute("easing","linear"),d.setAttribute("attribute","geometry.radiusInner"),d.setAttribute("fill","forwards"),d.setAttribute("from","0.0315"),d.setAttribute("to","0.035"),d.setAttribute("dur",""+a),o.appendChild(d);var b=document.createElement("a-entity");b.setAttribute("geometry","primitive: ring; radiusInner:0.0375; radiusOuter:0.04; thetaLength:360"),b.setAttribute("material","color: #000000; shader: flat; opacity:0.25;"),b.setAttribute("position","0 0 0"),o.appendChild(b),this.cursorShadow=b;var q=document.createElement("a-entity");q.setAttribute("geometry","primitive: plane; width:0.0035; height:0.01875"),q.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),q.setAttribute("position","0 0.028125 0"),o.appendChild(q),this.cursorVerticalTop=q;var U=document.createElement("a-animation");U.setAttribute("begin","hovergui"),U.setAttribute("easing","linear"),U.setAttribute("attribute","geometry.width"),U.setAttribute("fill","forwards"),U.setAttribute("from","0.0035"),U.setAttribute("to","0.007"),U.setAttribute("dur",""+a),q.appendChild(U);var W=document.createElement("a-animation");W.setAttribute("begin","leavegui"),W.setAttribute("easing","linear"),W.setAttribute("attribute","geometry.width"),W.setAttribute("fill","forwards"),W.setAttribute("from","0.007"),W.setAttribute("to","0.0035"),W.setAttribute("dur",""+a),q.appendChild(W);var Y=document.createElement("a-entity");Y.setAttribute("geometry","primitive: plane; width:0.0035; height:0.01875"),Y.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),Y.setAttribute("position","0 -0.028125 0"),o.appendChild(Y),this.cursorVerticalBottom=Y;var J=document.createElement("a-animation");J.setAttribute("begin","hovergui"),J.setAttribute("easing","linear"),J.setAttribute("attribute","geometry.width"),J.setAttribute("fill","forwards"),J.setAttribute("from","0.0035"),J.setAttribute("to","0.007"),J.setAttribute("dur",""+a),Y.appendChild(J);var X=document.createElement("a-animation");X.setAttribute("begin","leavegui"),X.setAttribute("easing","linear"),X.setAttribute("attribute","geometry.width"),X.setAttribute("fill","forwards"),X.setAttribute("from","0.007"),X.setAttribute("to","0.0035"),X.setAttribute("dur",""+a),Y.appendChild(X);var V=document.createElement("a-entity");V.setAttribute("geometry","primitive: plane; width:0.01875; height:0.0035"),V.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),V.setAttribute("position","-0.028125 0 0"),o.appendChild(V),this.cursorHorizontalLeft=V;var G=document.createElement("a-animation");G.setAttribute("begin","hovergui"),G.setAttribute("easing","linear"),G.setAttribute("attribute","geometry.height"),G.setAttribute("fill","forwards"),G.setAttribute("from","0.0035"),G.setAttribute("to","0.007"),G.setAttribute("dur",""+a),V.appendChild(G);var K=document.createElement("a-animation");K.setAttribute("begin","leavegui"),K.setAttribute("easing","linear"),K.setAttribute("attribute","geometry.height"),K.setAttribute("fill","forwards"),K.setAttribute("from","0.007"),K.setAttribute("to","0.0035"),K.setAttribute("dur",""+a),V.appendChild(K);var Q=document.createElement("a-entity");Q.setAttribute("geometry","primitive: plane; width:0.01875; height:0.0035"),Q.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),Q.setAttribute("position","0.028125 0 0"),o.appendChild(Q),this.cursorHorizontalRight=Q;var Z=document.createElement("a-animation");Z.setAttribute("begin","hovergui"),Z.setAttribute("easing","linear"),Z.setAttribute("attribute","geometry.height"),Z.setAttribute("fill","forwards"),Z.setAttribute("from","0.0035"),Z.setAttribute("to","0.007"),Z.setAttribute("dur",""+a),Q.appendChild(Z);var $=document.createElement("a-animation");if($.setAttribute("begin","leavegui"),$.setAttribute("easing","linear"),$.setAttribute("attribute","geometry.height"),$.setAttribute("fill","forwards"),$.setAttribute("from","0.007"),$.setAttribute("to","0.0035"),$.setAttribute("dur",""+a),Q.appendChild($),e){var y=document.createElement("a-entity");y.setAttribute("geometry","primitive: ring; radiusInner:0.0415; radiusOuter:0.0485; thetaLength:0"),y.setAttribute("material","color: "+r.activeColor+"; shader: flat; opacity:1;"),y.setAttribute("position","0 0 0"),o.appendChild(y),this.fuseLoader=y;var v=document.createElement("a-animation");v.setAttribute("begin","start-fusing"),v.setAttribute("easing","linear"),v.setAttribute("attribute","geometry.thetaLength"),v.setAttribute("fill","forwards"),v.setAttribute("from","0"),v.setAttribute("to","360"),v.setAttribute("delay",""+a),v.setAttribute("dur",""+n),y.appendChild(v)}}o.addEventListener("mouseenter",function(){console.log("in gui-cursor mousenter, el: "+o),o.emit("hovergui"),"dot"==r.design||"ring"==r.design?b.emit("hovergui"):"cross"==r.design?(b.emit("hovergui"),q.emit("hovergui"),Y.emit("hovergui"),V.emit("hovergui"),Q.emit("hovergui")):"reticle"==r.design&&(E.emit("hovergui"),_.emit("hovergui"),F.emit("hovergui"))}),o.addEventListener("mouseleave",function(){console.log("in gui-cursor mouseleave, el: "+o),o.emit("leavegui"),"dot"==r.design||"ring"==r.design?b.emit("leavegui"):"cross"==r.design?(q.emit("leavegui"),Y.emit("leavegui"),V.emit("leavegui"),Q.emit("leavegui")):"reticle"==r.design&&(E.emit("leavegui"),_.emit("leavegui"),F.emit("leavegui")),e&&v.stop(),o.setAttribute("scale","1 1 1")}),e&&o.addEventListener("fusing",function(){y.emit("start-fusing")}),o.addEventListener("stateremoved",function(t){console.log("evt.detail "+t.detail),"cursor-fusing"===t.detail?"dot"==r.design||"ring"==r.design||"cross"==r.design?e&&(v.stop(),AFRAME.utils.entity.setComponentProperty(y,"geometry.thetaLength","0")):"reticle"==r.design&&e&&(v.stop(),AFRAME.utils.entity.setComponentProperty(y,"geometry.width","0.000001")):"cursor-hovering"===t.detail&&("dot"==r.design||"ring"==r.design?(AFRAME.utils.entity.setComponentProperty(this,"scale","1 1 1"),e&&AFRAME.utils.entity.setComponentProperty(y,"geometry.thetaLength","0")):"cross"==r.design?e&&AFRAME.utils.entity.setComponentProperty(y,"geometry.thetaLength","0"):"reticle"==r.design&&e&&AFRAME.utils.entity.setComponentProperty(y,"geometry.width","0.000001"))})},update:function(){},tick:function(){},remove:function(){},pause:function(){},play:function(){}}),AFRAME.registerPrimitive("a-gui-cursor",{defaultComponents:{cursor:{},"gui-cursor":{}},mappings:{fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",color:"gui-cursor.color","hover-color":"gui-cursor.hoverColor","active-color":"gui-cursor.activeColor",distance:"gui-cursor.distance",design:"gui-cursor.design"}})},function(t,e,i){"use strict";i(0);var o=function(t,e){new MutationObserver(function(t,i){t.forEach(function(t){console.log(t),t.addedNodes.length&&e(t.target,t.addedNodes)})}).observe(t,{childList:!0})};AFRAME.registerComponent("gui-flex-container",{schema:{flexDirection:{type:"string",default:"row"},justifyContent:{type:"string",default:"flexStart"},alignItems:{type:"string",default:"flexStart"},itemPadding:{type:"number",default:0},opacity:{type:"number",default:0},isTopContainer:{type:"boolean",default:!1},panelColor:{type:"string",default:key_grey},styles:{fontFamily:{type:"string",default:"Helvetica"},fontColor:{type:"string",default:key_offwhite},borderColor:{type:"string",default:key_offwhite},backgroundColor:{type:"string",default:key_grey},hoverColor:{type:"string",default:key_grey_dark},activeColor:{type:"string",default:key_orange},handleColor:{type:"string",default:key_offwhite}}},init:function(){console.log("in aframe-gui-component init for: "+this.el.getAttribute("id"));var t=this.el.getAttribute("gui-item");this.data.isTopContainer&&this.setBackground(),this.el.setAttribute("geometry","primitive: plane; height: "+t.height+"; width: "+t.width+";"),this.el.setAttribute("material","shader: flat; transparent: true; opacity: "+this.data.opacity+"; color: "+this.data.panelColor+"; side:front;"),this.children=this.el.getChildEntities();var e=0,i=0;if("row"==this.data.flexDirection){if("flexStart"==this.data.justifyContent)e=0;else if("center"==this.data.justifyContent||"flexEnd"==this.data.justifyContent){for(var r=0,a=0;a<this.children.length;a++){var n=this.children[a],l=n.getAttribute("gui-item");r=r+l.margin.w+l.width+l.margin.y}"center"==this.data.justifyContent?e=.5*(t.width-r):"flexEnd"==this.data.justifyContent&&(e=t.width-r)}"center"==this.data.alignItems?i=t.height:"flexStart"==this.data.alignItems?i=0:"flexEnd"==this.data.alignItems&&(i=t.height)}else if("column"==this.data.flexDirection){if("flexStart"==this.data.justifyContent)i=0;else if("center"==this.data.justifyContent||"flexEnd"==this.data.justifyContent){for(var s=0,a=0;a<this.children.length;a++){var n=this.children[a],l=n.getAttribute("gui-item");s=s+l.margin.x+l.height+l.margin.z}"center"==this.data.justifyContent?i=.5*(t.height-s):"flexEnd"==this.data.justifyContent&&(i=t.height-s)}"flexStart"==this.data.alignItems?e=0:"center"==this.data.alignItems?e=.5*t.width:"flexEnd"==this.data.alignItems&&(e=0)}for(var a=0;a<this.children.length;a++){var n=this.children[a],u=0,d=0,l=n.getAttribute("gui-item");if(l){"row"==this.data.flexDirection?("center"==this.data.alignItems?d=0:"flexStart"==this.data.alignItems?d=.5*t.height-l.margin.x-l.height:"flexEnd"==this.data.alignItems&&(d=.5*-t.height+l.margin.z+l.height),u=.5*-t.width+e+l.margin.w+.5*l.width,e=e+l.margin.w+l.width+l.margin.y):"column"==this.data.flexDirection&&("center"==this.data.alignItems?u=0:"flexStart"==this.data.alignItems?u=.5*-t.width+l.margin.w+.5*l.width:"flexEnd"==this.data.alignItems&&(u=.5*t.width-l.margin.y-.5*l.width),d=.5*t.height-i- -l.margin.x-.5*l.height,i=i+l.margin.x+l.height+l.margin.z),n.setAttribute("position",u+" "+d+" "+.01),n.setAttribute("geometry","primitive: plane; height: "+l.height+"; width: "+l.width+";");var c=n.components["gui-flex-container"];c&&c.setBackground()}}o(this.el,function(t,e){e[0];e[0].addEventListener("loaded",function(e){t.components["gui-flex-container"].init()})})},update:function(){},tick:function(){},remove:function(){},pause:function(){},play:function(){},getElementSize:function(){},setBackground:function(){if(this.data.opacity>0){console.log("panel position: "+JSON.stringify(this.el.getAttribute("position")));var t=this.el.getAttribute("gui-item"),e=document.createElement("a-entity");e.setAttribute("geometry","primitive: box; height: "+t.height+"; width: "+t.width+"; depth:0.025;"),console.log("about to set panel background color to: : "+this.data.panelColor),e.setAttribute("material","shader: standard; depthTest: true; opacity: "+this.data.opacity+"; color: "+this.data.panelColor+";"),e.setAttribute("position",this.el.getAttribute("position").x+" "+this.el.getAttribute("position").y+" "+(this.el.getAttribute("position").z-.0125)),e.setAttribute("rotation",this.el.getAttribute("rotation").x+" "+this.el.getAttribute("rotation").y+" "+this.el.getAttribute("rotation").z),this.el.parentNode.insertBefore(e,this.el)}}}),AFRAME.registerPrimitive("a-gui-flex-container",{defaultComponents:{"gui-item":{type:"flex-container"},"gui-flex-container":{}},mappings:{width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin","flex-direction":"gui-flex-container.flexDirection","justify-content":"gui-flex-container.justifyContent","align-items":"gui-flex-container.alignItems","item-padding":"gui-flex-container.itemPadding",opacity:"gui-flex-container.opacity","is-top-container":"gui-flex-container.isTopContainer","panel-color":"gui-flex-container.panelColor","font-family":"gui-flex-container.styles.fontFamily","font-color":"gui-flex-container.styles.fontColor","border-color":"gui-flex-container.styles.borderColor","background-color":"gui-flex-container.styles.backgroundColor","hover-color":"gui-flex-container.styles.hoverColor","active-color":"gui-flex-container.styles.activeColor","handle-color":"gui-flex-container.styles.handleColor"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-icon-button",{schema:{on:{default:"click"},icon:{type:"string",default:""},iconActive:{type:"string",default:""},toggle:{type:"boolean",default:!1},fontFamily:{type:"string",default:"Helvetica"},fontColor:{type:"string",default:key_offwhite},borderColor:{type:"string",default:key_offwhite},backgroundColor:{type:"string",default:key_grey},hoverColor:{type:"string",default:key_grey_dark},activeColor:{type:"string",default:key_orange}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item"),o=350,r=i.height*o,a=i.height*o,n=(this.toggleState=t.toggle,document.createElement("div"));n.setAttribute("class","visuallyhidden"),document.body.appendChild(n);var l=document.createElement("canvas");this.canvas=l,l.className="visuallyhidden",l.setAttribute("width",r),l.setAttribute("height",a),l.id=getUniqueId("canvasIcon"),n.appendChild(l);var s=this.ctx=l.getContext("2d");e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.height+";"),e.setAttribute("material","shader: flat; transparent: true; opacity: 0.5; side:back; color:"+t.backgroundColor+";"),drawIcon(s,l,t.icon,t.fontColor,1);var u=document.createElement("a-entity");u.setAttribute("geometry","primitive: cylinder; radius: "+i.height/2+"; height: 0.02;"),u.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),u.setAttribute("rotation","90 0 0"),u.setAttribute("position","0 0 0.01"),e.appendChild(u);var d=document.createElement("a-entity");d.setAttribute("geometry","primitive: cylinder; radius: "+i.height/2.05+"; height: 0.04;"),d.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.backgroundColor),d.setAttribute("rotation","90 0 0"),d.setAttribute("position","0 0 0.02"),e.appendChild(d),this.buttonEntity=d;var c=document.createElement("a-animation");c.setAttribute("attribute","material.color"),c.setAttribute("begin","fadeOut"),c.setAttribute("from",t.activeColor),c.setAttribute("to",t.backgroundColor),c.setAttribute("dur","400"),d.appendChild(c);var g=document.createElement("a-entity");g.setAttribute("geometry","primitive: plane; width: "+i.height/2+"; height: "+i.height/2+";"),g.setAttribute("material","shader: flat; src: #"+l.id+"; transparent: true; opacity: 1; side:front;"),g.setAttribute("position","0 0 0.041"),e.appendChild(g),e.setAttribute("role","button"),e.addEventListener("mouseenter",function(){d.setAttribute("material","color",t.hoverColor)}),e.addEventListener("mouseleave",function(){t.toggle||d.setAttribute("material","color",t.backgroundColor)}),e.addEventListener(t.on,function(i){t.toggle?d.setAttribute("material","color",t.activeColor):d.emit("fadeOut"),this.toggleState=!this.toggleState;var o=e.getAttribute("gui-interactable"),r=o.clickAction,a=window[r];"function"==typeof a&&a()})},play:function(){},update:function(t){console.log("In button update, toggle: "+this.toggleState)}}),AFRAME.registerPrimitive("a-gui-icon-button",{defaultComponents:{"gui-interactable":{},"gui-item":{type:"icon-button"},"gui-icon-button":{}},mappings:{onclick:"gui-interactable.clickAction",onhover:"gui-interactable.hoverAction","key-code":"gui-interactable.keyCode",width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin",on:"gui-icon-button.on","font-color":"gui-icon-button.fontColor","font-family":"gui-icon-button.fontFamily","border-color":"gui-icon-button.borderColor","background-color":"gui-icon-button.backgroundColor","hover-color":"gui-icon-button.hoverColor","active-color":"gui-icon-button.activeColor",toggle:"gui-icon-button.toggle",icon:"gui-icon-button.icon","icon-active":"gui-icon-button.iconActive"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-icon-label-button",{schema:{on:{default:"click"},icon:{type:"string",default:""},iconActive:{type:"string",default:""},text:{type:"string",default:""},toggle:{type:"boolean",default:!1},fontFamily:{type:"string",default:"Helvetica"},fontColor:{type:"string",default:key_offwhite},borderColor:{type:"string",default:key_offwhite},backgroundColor:{type:"string",default:key_grey},hoverColor:{type:"string",default:key_grey_dark},activeColor:{type:"string",default:key_orange}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item");this.toggleState=t.toggle;e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.width+";"),e.setAttribute("material","shader: flat; side:front; color:"+t.backgroundColor+";");var o=document.createElement("a-entity");o.setAttribute("geometry","primitive: box; width: "+i.width+"; height: "+i.height+"; depth: 0.02;"),o.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),o.setAttribute("rotation","0 0 0"),o.setAttribute("position","0 0 0.01"),e.appendChild(o);var r=document.createElement("a-entity");r.setAttribute("geometry","primitive: box; width: "+(i.width-.025)+"; height: "+(i.height-.025)+"; depth: 0.04;"),r.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.backgroundColor),r.setAttribute("rotation","0 0 0"),r.setAttribute("position","0 0 0.02"),e.appendChild(r),this.buttonEntity=r;var a=document.createElement("a-animation");a.setAttribute("attribute","material.color"),a.setAttribute("begin","fadeOut"),a.setAttribute("from",t.activeColor),a.setAttribute("to",t.backgroundColor),a.setAttribute("dur","400"),r.appendChild(a);var n=550;""!=t.text&&(n=350);var l=document.createElement("div");l.setAttribute("class","visuallyhidden"),document.body.appendChild(l);var s=i.height*n,u=i.height*n,d=document.createElement("canvas");this.iconCanvas=d,d.className="visuallyhidden",d.setAttribute("width",s),d.setAttribute("height",u),d.id=getUniqueId("canvasIcon"),l.appendChild(d);var c=this.ctxIcon=d.getContext("2d");drawIcon(c,d,t.icon,t.fontColor,1);var g=0;""!=t.text&&(g=.5*-i.width+.5*i.height);var h=document.createElement("a-entity");if(""!=t.text?h.setAttribute("geometry","primitive: plane; width: "+i.height/2+"; height: "+i.height/2+";"):h.setAttribute("geometry","primitive: plane; width: "+i.width/2+"; height: "+i.height/2+";"),h.setAttribute("material","shader: flat; src: #"+d.id+"; transparent: true; opacity: 1; side:front;"),h.setAttribute("position",g+" 0 0.041"),e.appendChild(h),""!=t.text){var b=i.width-i.height,m=b*n,p=i.height*n,f=document.createElement("canvas");this.labelCanvas=f,f.setAttribute("width",m),f.setAttribute("height",p),f.id=getUniqueId("canvasLabel"),l.appendChild(f);this.ctxLabel=f.getContext("2d");drawLabel(this.ctxLabel,this.labelCanvas,t.text,i.fontSize+" "+t.fontFamily,t.fontColor);var A=.5*i.height-.05*i.width,y=document.createElement("a-entity");y.setAttribute("geometry","primitive: plane; width: "+b+"; height: "+i.height/1.05+";"),y.setAttribute("material","shader: flat; src: #"+f.id+"; transparent: true; opacity: 1; side:front;"),y.setAttribute("position",A+" 0 0.041"),e.appendChild(y)}e.setAttribute("role","button"),e.addEventListener("mouseenter",function(){r.setAttribute("material","color",t.hoverColor)}),e.addEventListener("mouseleave",function(){t.toggle||r.setAttribute("material","color",t.backgroundColor)}),e.addEventListener(t.on,function(i){t.toggle?r.setAttribute("material","color",t.activeColor):r.emit("fadeOut"),this.toggleState=!this.toggleState;var o=e.getAttribute("gui-interactable"),a=o.clickAction,n=window[a];"function"==typeof n&&n()})},play:function(){},update:function(t){console.log("In button update, toggle: "+this.toggleState)}}),AFRAME.registerPrimitive("a-gui-icon-label-button",{defaultComponents:{"gui-interactable":{},"gui-item":{type:"icon-label-button"},"gui-icon-label-button":{}},mappings:{onclick:"gui-interactable.clickAction",onhover:"gui-interactable.hoverAction","key-code":"gui-interactable.keyCode",width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin","font-size":"gui-item.fontSize",on:"gui-icon-label-button.on","font-color":"gui-icon-label-button.fontColor","font-family":"gui-icon-label-button.fontFamily","border-color":"gui-icon-label-button.borderColor","background-color":"gui-icon-label-button.backgroundColor","hover-color":"gui-icon-label-button.hoverColor","active-color":"gui-icon-label-button.activeColor",toggle:"gui-icon-label-button.toggle",icon:"gui-icon-label-button.icon","icon-active":"gui-icon-label-button.iconActive",value:"gui-icon-label-button.text"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-input",{schema:{on:{default:"click"},inputText:{type:"string",default:"Placeholder"},toggle:{type:"boolean",default:!1},fontFamily:{type:"string",default:"Helvetica"},fontColor:{type:"string",default:key_grey_dark},borderColor:{type:"string",default:key_grey_dark},borderHoverColor:{type:"string",default:key_grey},backgroundColor:{type:"string",default:key_offwhite},hoverColor:{type:"string",default:key_white},activeColor:{type:"string",default:key_orange}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item"),o=350,r=i.width*o,a=i.height*o,n=document.createElement("div");n.setAttribute("class","visuallyhidden"),document.body.appendChild(n);var l=document.createElement("canvas");this.canvas=l,l.className="visuallyhidden",l.setAttribute("width",r),l.setAttribute("height",a),l.id=getUniqueId("canvas"),n.appendChild(l);var s=this.ctx=l.getContext("2d");e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.width+";"),e.setAttribute("material","shader: flat; transparent: false; side:front; color:"+t.backgroundColor+";"),drawText(s,l,t.inputText,i.fontSize+" "+t.fontFamily,t.fontColor,1);var u=document.createElement("a-entity");u.setAttribute("geometry","primitive: plane; width: "+i.width/1.05+"; height: "+i.height/1.05+";"),u.setAttribute("material","shader: flat; src: #"+l.id+"; transparent: true; opacity: 1; side:front;"),u.setAttribute("position","0 0 0.01"),e.appendChild(u);var d=document.createElement("a-entity");d.setAttribute("geometry","primitive: box; width: "+i.width+"; height: 0.05; depth: 0.02;"),d.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),d.setAttribute("position","0 -"+(i.height/2-.025)+" 0.01"),e.appendChild(d);var c=document.createElement("a-entity");c.setAttribute("geometry","primitive: box; width: "+i.width+"; height: 0.05; depth: 0.02;"),c.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),c.setAttribute("position","0 "+(i.height/2-.025)+" 0.01"),e.appendChild(c);var g=document.createElement("a-entity");g.setAttribute("geometry","primitive: box; width: 0.05; height: "+i.height+"; depth: 0.02;"),g.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),g.setAttribute("position","-"+(i.width/2-.025)+" 0 0.01"),e.appendChild(g);var h=document.createElement("a-entity");h.setAttribute("geometry","primitive: box; width: 0.05; height: "+i.height+"; depth: 0.02;"),h.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),h.setAttribute("position",i.width/2-.025+" 0 0.01"),e.appendChild(h),e.setAttribute("role","input"),e.addEventListener("mouseenter",function(){e.setAttribute("material","color",t.hoverColor),d.setAttribute("material","color",t.borderHoverColor),c.setAttribute("material","color",t.borderHoverColor),g.setAttribute("material","color",t.borderHoverColor),h.setAttribute("material","color",t.borderHoverColor)}),e.addEventListener("mouseleave",function(){e.setAttribute("material","color",t.backgroundColor),d.setAttribute("material","color",t.borderColor),c.setAttribute("material","color",t.borderColor),g.setAttribute("material","color",t.borderColor),h.setAttribute("material","color",t.borderColor)}),e.addEventListener(t.on,function(t){console.log("I was clicked at: ",t.detail.intersection.point);var i=e.getAttribute("gui-interactable");console.log("guiInteractable: "+i);var o=i.clickAction;console.log("clickActionFunctionName: "+o);var r=window[o];"function"==typeof r&&r()})},play:function(){},update:function(t){}}),AFRAME.registerPrimitive("a-gui-input",{defaultComponents:{"gui-interactable":{},"gui-item":{type:"input"},"gui-input":{}},mappings:{onclick:"gui-interactable.clickAction",onhover:"gui-interactable.hoverAction","key-code":"gui-interactable.keyCode",width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin","font-size":"gui-item.fontSize",on:"gui-input.on",value:"gui-input.inputText",toggle:"gui-input.toggle","font-color":"gui-input.fontColor","font-family":"gui-input.fontFamily","border-color":"gui-input.borderColor","border-hover-color":"gui-input.borderHoverColor","background-color":"gui-input.backgroundColor","hover-color":"gui-input.hoverColor","active-color":"gui-input.activeColor"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-interactable",{schema:{clickAction:{type:"string"},hoverAction:{type:"string"},keyCode:{type:"number",default:null}},init:function(){var t=this.data,e=this.el;t.keyCode&&window.addEventListener("keydown",function(i){i.keyCode==t.keyCode&&(console.log("key press by gui-interactable : "+t.keyCode),e.emit("click")),i.preventDefault()},!0)},update:function(){},tick:function(){},remove:function(){},pause:function(){},play:function(){},setClickAction:function(t){this.data.clickAction=t}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-item",{schema:{type:{type:"string"},width:{type:"number",default:1},height:{type:"number",default:1},fontSize:{type:"string",default:"100px"},margin:{type:"vec4",default:"0 0 0 0"}},init:function(){},update:function(){},tick:function(){},remove:function(){},pause:function(){},play:function(){}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-label",{schema:{text:{type:"string",default:"label text"},labelFor:{type:"selector",default:null},fontFamily:{type:"string",default:"Helvetica"},fontColor:{type:"string",default:key_grey_dark},backgroundColor:{type:"string",default:key_offwhite}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item"),o=350,r=i.width*o,a=i.height*o,n=document.createElement("div");n.setAttribute("class","visuallyhidden"),document.body.appendChild(n);var l=document.createElement("canvas");this.canvas=l,l.className="visuallyhidden",l.setAttribute("width",r),l.setAttribute("height",a),l.id=getUniqueId("canvas"),n.appendChild(l);var s=this.ctx=l.getContext("2d");e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.width+";"),e.setAttribute("material","shader: flat; side:front; color:"+t.backgroundColor+";"),this.oldText=t.text,drawText(s,l,t.text,i.fontSize+" "+t.fontFamily,t.fontColor,1);var u=document.createElement("a-entity");u.setAttribute("geometry","primitive: plane; width: "+i.width/1.05+"; height: "+i.height/1.05+";"),u.setAttribute("material","shader: flat; src: #"+l.id+"; transparent: true; opacity: 1; side:front;"),u.setAttribute("position","0 0 0.001"),e.appendChild(u),t.labelFor},update:function(t){this.init()},tick:function(){this.data.text!==this.oldText&&drawText(this.ctx,this.canvas,this.data.text,"100px "+this.data.fontFamily,this.data.fontColor,1)}}),AFRAME.registerPrimitive("a-gui-label",{defaultComponents:{"gui-item":{type:"label"},"gui-label":{}},mappings:{width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin","font-size":"gui-item.fontSize",on:"gui-button.on",value:"gui-label.text","label-for":"gui-label.labelFor","font-color":"gui-label.fontColor","font-family":"gui-label.fontFamily","background-color":"gui-label.backgroundColor"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-progressbar",{schema:{backgroundColor:{type:"string",default:key_grey},activeColor:{type:"string",default:key_orange}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item");e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.width+";"),e.setAttribute("material","shader: flat; opacity: 1;  color: "+t.backgroundColor+"; side:front;");var o=document.createElement("a-entity");o.setAttribute("geometry","primitive: box; width: 0.04; height: "+i.height+"; depth: 0.02;"),o.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.activeColor),o.setAttribute("position",-i.width/2+" 0 0.01"),o.id="progress_meter",e.appendChild(o)},update:function(){},tick:function(){},remove:function(){},pause:function(){},play:function(){}}),AFRAME.registerPrimitive("a-gui-progressbar",{defaultComponents:{"gui-item":{type:"progressbar"},"gui-progressbar":{}},mappings:{width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin","background-color":"gui-progressbar.backgroundColor","active-color":"gui-progressbar.activeColor"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-radio",{schema:{on:{default:"click"},text:{type:"string",default:"text"},active:{type:"boolean",default:!0},checked:{type:"boolean",default:!1},radiosizecoef:{type:"number",default:1},fontFamily:{type:"string",default:"Helvetica"},fontColor:{type:"string",default:key_grey_dark},borderColor:{type:"string",default:key_white},backgroundColor:{type:"string",default:key_offwhite},hoverColor:{type:"string",default:key_grey_light},activeColor:{type:"string",default:key_orange},handleColor:{type:"string",default:key_grey}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item");e.setAttribute("material","shader: flat; depthTest:true;transparent: false; opacity: 1;  color: "+this.data.backgroundColor+"; side:front;"),e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.height+";");var o=.5*-i.width+.5*i.height,r=document.createElement("a-cylinder");r.setAttribute("radius",.2*i.height*t.radiosizecoef),r.setAttribute("height","0.01"),r.setAttribute("rotation","90 0 0"),r.setAttribute("material","color:"+t.handleColor+"; shader: flat;"),r.setAttribute("position",o+" 0 0"),e.appendChild(r);var a=document.createElement("a-torus");a.setAttribute("radius",.19*i.height*t.radiosizecoef),a.setAttribute("radius-tubular","0.01"),a.setAttribute("rotation","90 0 0"),a.setAttribute("material","color:"+t.borderColor+"; shader: flat;"),r.appendChild(a);var n=document.createElement("a-cylinder");n.setAttribute("radius",.18*i.height*t.radiosizecoef),n.setAttribute("height","0.02"),n.setAttribute("rotation","0 0 0"),n.setAttribute("material","color:"+t.handleColor+"; shader: flat;"),r.appendChild(n);var l=document.createElement("a-animation");l.setAttribute("begin","radioAnimation"),l.setAttribute("direction","alternate"),l.setAttribute("attribute","material.color"),l.setAttribute("from",""+t.handleColor),l.setAttribute("to",""+t.activeColor),l.setAttribute("dur","500"),l.setAttribute("easing","ease-in-out-cubic"),n.appendChild(l);var s=document.createElement("a-animation");s.setAttribute("begin","radioAnimation"),s.setAttribute("direction","alternate"),s.setAttribute("attribute","rotation"),s.setAttribute("from","0 0 0"),s.setAttribute("to","-180 0 0"),s.setAttribute("dur","500"),s.setAttribute("easing","ease-in-out-cubic"),n.appendChild(s);var u=document.createElement("a-animation");u.setAttribute("begin","radioAnimation"),u.setAttribute("direction","normal"),u.setAttribute("attribute","position"),u.setAttribute("from","0 0 0"),u.setAttribute("to","0 0.3 0 "),u.setAttribute("dur","300"),u.setAttribute("easing","ease-in-out-cubic"),n.appendChild(u);var d=document.createElement("a-animation");d.setAttribute("begin","radioAnimation"),d.setAttribute("direction","normal"),d.setAttribute("attribute","position"),d.setAttribute("from","0 0.3 0"),d.setAttribute("to","0 0 0 "),d.setAttribute("delay","300"),d.setAttribute("dur","200"),d.setAttribute("easing","ease-in-out-cubic"),n.appendChild(d);var c=i.width-i.height,g=350,h=c*g,b=i.height*g,m=document.createElement("div");m.setAttribute("class","visuallyhidden"),document.body.appendChild(m);var p=document.createElement("canvas");this.labelCanvas=p,p.className="visuallyhidden",p.setAttribute("width",h),p.setAttribute("height",b),p.id=getUniqueId("canvas"),m.appendChild(p);this.ctxLabel=p.getContext("2d");drawLabel(this.ctxLabel,this.labelCanvas,this.data.text,i.fontSize+" "+t.fontFamily,this.data.fontColor);var f=.5*i.height-.05*i.width,A=document.createElement("a-entity");A.setAttribute("geometry","primitive: plane; width: "+c+"; height: "+i.height/1.05+";"),A.setAttribute("material","shader: flat; src: #"+p.id+"; transparent: true; opacity: 1;  color: "+this.data.backgroundColor+"; side:front;"),A.setAttribute("position",f+" 0 0.02"),e.appendChild(A),this.updateToggle(t.active),e.setAttribute("checked",t.active),e.addEventListener("mouseenter",function(){a.setAttribute("material","color",t.hoverColor)}),e.addEventListener("mouseleave",function(){a.setAttribute("material","color",t.borderColor)}),e.addEventListener(t.on,function(i){t.checked=!t.checked,l.emit("radioAnimation");var o=e.getAttribute("gui-interactable");console.log("guiInteractable: "+o);var r=o.clickAction;console.log("clickActionFunctionName: "+r);var a=window[r];"function"==typeof a&&a()})},update:function(){var t=this.data;this.updateToggle(t.active)},updateToggle:function(t){}}),AFRAME.registerPrimitive("a-gui-radio",{defaultComponents:{"gui-interactable":{},"gui-item":{type:"radio"},"gui-radio":{}},mappings:{onclick:"gui-interactable.clickAction",onhover:"gui-interactable.hoverAction","key-code":"gui-interactable.keyCode",width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin","font-size":"gui-item.fontSize",on:"gui-radio.on",value:"gui-radio.text",active:"gui-radio.active",checked:"gui-radio.checked","font-color":"gui-radio.fontColor","font-family":"gui-radio.fontFamily","border-color":"gui-radio.borderColor","background-color":"gui-radio.backgroundColor","hover-color":"gui-radio.hoverColor","active-color":"gui-radio.activeColor","handle-color":"gui-radio.handleColor",radiosizecoef:"gui-radio.radiosizecoef"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-slider",{schema:{percent:{type:"number",default:"0.5"},handleOuterRadius:{type:"number",default:"0.17"},handleInnerRadius:{type:"number",default:"0.13"},handleOuterDepth:{type:"number",default:"0.04"},handleInnerDepth:{type:"number",default:"0.02"},sliderBarHeight:{type:"number",default:"0.05"},sliderBarDepth:{type:"number",default:"0.03"},leftRightPadding:{type:"number",default:"0.25"},topBottomPadding:{type:"number",default:"0.125"},borderColor:{type:"string",default:key_grey},backgroundColor:{type:"string",default:key_offwhite},hoverColor:{type:"string",default:key_grey_light},activeColor:{type:"string",default:key_orange},handleColor:{type:"string",default:key_white}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item"),o=i.width-2*t.leftRightPadding;i.height,t.topBottomPadding;e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.height+";"),e.setAttribute("material","shader: flat; opacity: 1;  color: "+t.backgroundColor+"; side:front;");var r=document.createElement("a-entity");r.setAttribute("geometry","primitive: box; width: "+t.percent*o+"; height: "+t.sliderBarHeight+"; depth: "+t.sliderBarDepth+";"),r.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.activeColor+";"),r.setAttribute("position",t.percent-.5*o+" 0 "+(t.sliderBarDepth-.01)),e.appendChild(r);var a=document.createElement("a-entity");a.setAttribute("geometry","primitive: box; width: "+(o-t.percent*o)+"; height: "+t.sliderBarHeight+"; depth: "+t.sliderBarDepth+";"),a.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor+";"),a.setAttribute("position",t.percent*o*.5+" 0 "+(t.sliderBarDepth-.01)),e.appendChild(a);var n=document.createElement("a-entity");n.setAttribute("geometry","primitive: cylinder; radius: "+t.handleOuterRadius+"; height: "+t.handleOuterDepth+";"),n.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor+";"),n.setAttribute("rotation","90 0 0"),n.setAttribute("position",t.percent*o-.5*o+" 0 "+(t.handleOuterDepth-.01)),e.appendChild(n);var l=document.createElement("a-entity");l.setAttribute("geometry","primitive: cylinder; radius: "+t.handleInnerRadius+"; height: "+t.handleInnerDepth+";"),l.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.handleColor+";"),l.setAttribute("position","0 "+t.handleInnerDepth+" 0"),n.appendChild(l),e.addEventListener("mouseenter",function(){l.setAttribute("material","color",t.hoverColor)}),e.addEventListener("mouseleave",function(){l.setAttribute("material","color",t.handleColor)}),e.addEventListener("click",function(i){console.log("I was clicked at: ",i.detail.intersection.point);var o=e.object3D.worldToLocal(i.detail.intersection.point);console.log("local coordinates: ",o),console.log("current percent: "+t.percent);var l=2;o.x<=-l/2?t.percent=0:o.x>=l/2?t.percent=1:t.percent=(o.x+l/2)/l,console.log("handle container: "+n),r.setAttribute("geometry","primitive: box; width: "+2*t.percent+"; height: 0.05; depth: 0.03;"),r.setAttribute("position",t.percent-1+" 0 0.02"),a.setAttribute("geometry","primitive: box; width: "+(2-2*t.percent)+"; height: 0.05; depth: 0.03;"),a.setAttribute("position",1*t.percent+" 0 0.02"),n.setAttribute("position",2*t.percent-1+" 0 0.03");var s=e.getAttribute("gui-interactable");console.log("guiInteractable: "+s);var u=s.clickAction;console.log("clickActionFunctionName: "+u);var d=window[u];"function"==typeof d&&d()})},update:function(){},tick:function(){},remove:function(){},pause:function(){},play:function(){}}),AFRAME.registerPrimitive("a-gui-slider",{defaultComponents:{"gui-interactable":{},"gui-item":{type:"slider"},"gui-slider":{}},mappings:{onclick:"gui-interactable.clickAction",onhover:"gui-interactable.hoverAction","key-code":"gui-interactable.keyCode",width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin",percent:"gui-slider.percent","handle-outer-radius":"gui-slider.handleOuterRadius","handle-inner-radius":"gui-slider.handleInnerRadius","handle-outer-depth":"gui-slider.handleOuterDepth","handle-inner-depth":"gui-slider.handleInnerDepth","slider-bar-height":"gui-slider.sliderBarHeight","slider-bar-depth":"gui-slider.sliderBarDepth","left-right-padding":"gui-slider.leftRightPadding","top-bottom-padding":"gui-slider.topBottomPadding","border-color":"gui-slider.borderColor","background-color":"gui-slider.backgroundColor","hover-color":"gui-slider.hoverColor","active-color":"gui-slider.activeColor","handle-color":"gui-slider.handleColor"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-toggle",{schema:{on:{default:"click"},text:{type:"string",default:"text"},active:{type:"boolean",default:!0},checked:{type:"boolean",default:!1},borderWidth:{type:"number",default:1},fontFamily:{type:"string",default:"Helvetica"},fontColor:{type:"string",default:key_grey_dark},borderColor:{type:"string",default:key_grey},backgroundColor:{type:"string",default:key_offwhite},hoverColor:{type:"string",default:key_grey_light},activeColor:{type:"string",default:key_orange},handleColor:{type:"string",default:key_offwhite}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item");e.setAttribute("material","shader: flat; depthTest:true;transparent: false; opacity: 1;  color: "+this.data.backgroundColor+"; side:front;"),e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.height+";");var o=i.height/1.75,r=.5*-i.width+i.height/2,a=document.createElement("a-box");a.setAttribute("width",o),a.setAttribute("height",.5*i.height),a.setAttribute("depth","0.01"),a.setAttribute("material","color:"+t.borderColor+"; shader: flat;"),a.setAttribute("position",r+" 0 0"),e.appendChild(a);var n=document.createElement("a-animation");n.setAttribute("begin","toggleAnimation"),n.setAttribute("direction","alternate"),n.setAttribute("attribute","material.color"),n.setAttribute("from",""+t.borderColor),n.setAttribute("to",""+t.activeColor),n.setAttribute("dur","50"),n.setAttribute("easing","ease-in-out-cubic"),a.appendChild(n);var l=i.height/5,s=.5*-i.height+2*l,u=.5*i.height-2*l,d=document.createElement("a-box");d.setAttribute("width",""+l),d.setAttribute("height",.4*i.height),d.setAttribute("depth","0.02"),d.setAttribute("material","color:"+t.handleColor),d.setAttribute("position",s+" 0 0.02"),a.appendChild(d);var c=document.createElement("a-animation");c.setAttribute("begin","toggleAnimation"),c.setAttribute("direction","alternate"),c.setAttribute("attribute","position"),c.setAttribute("from",s+" 0 0.02"),c.setAttribute("to",u+" 0 0.02"),c.setAttribute("dur","50"),c.setAttribute("easing","ease-in-out-cubic"),d.appendChild(c);var g=i.width-i.height,h=350,b=g*h,m=i.height*h,p=document.createElement("div");p.setAttribute("class","visuallyhidden"),document.body.appendChild(p);var f=document.createElement("canvas");this.labelCanvas=f,f.className="visuallyhidden",f.setAttribute("width",b),f.setAttribute("height",m),f.id=getUniqueId("canvas"),p.appendChild(f);this.ctxLabel=f.getContext("2d");drawLabel(this.ctxLabel,this.labelCanvas,this.data.text,i.fontSize+" "+t.fontFamily,this.data.fontColor);var A=.5*i.height-.05*i.width,y=document.createElement("a-entity");y.setAttribute("geometry","primitive: plane; width: "+g+"; height: "+i.height/1.05+";"),y.setAttribute("material","shader: flat; src: #"+f.id+"; transparent: true; opacity: 1;  color: "+this.data.backgroundColor+"; side:front;"),y.setAttribute("position",A+" 0 0.02"),e.appendChild(y),this.updateToggle(t.active),e.addEventListener("mouseenter",function(){d.setAttribute("material","color",t.hoverColor)}),e.addEventListener("mouseleave",function(){d.setAttribute("material","color",t.handleColor)}),e.addEventListener("check",function(e){t.checked||(t.checked=!0,n.emit("toggleAnimation"),c.emit("toggleAnimation"))}),e.addEventListener("uncheck",function(e){t.checked&&(t.checked=!1,n.emit("toggleAnimation"),c.emit("toggleAnimation"))}),e.addEventListener(t.on,function(i){console.log("I was clicked at: ",i.detail.intersection.point),t.checked=!t.checked,n.emit("toggleAnimation"),c.emit("toggleAnimation");var o=e.getAttribute("gui-interactable");console.log("guiInteractable: "+o);var r=o.clickAction;console.log("clickActionFunctionName: "+r);var a=window[r];"function"==typeof a&&a()})},update:function(){var t=this.data;this.updateToggle(t.active)},updateToggle:function(t){}}),AFRAME.registerPrimitive("a-gui-toggle",{defaultComponents:{"gui-interactable":{},"gui-item":{type:"toggle"},"gui-toggle":{}},mappings:{onclick:"gui-interactable.clickAction",onhover:"gui-interactable.hoverAction","key-code":"gui-interactable.keyCode",width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin","font-size":"gui-item.fontSize",on:"gui-toggle.on",active:"gui-toggle.active",checked:"gui-toggle.checked",value:"gui-toggle.text","font-color":"gui-toggle.fontColor","font-family":"gui-toggle.fontFamily","border-width":"gui-toggle.borderWidth","border-color":"gui-toggle.borderColor","background-color":"gui-toggle.backgroundColor","hover-color":"gui-toggle.hoverColor","active-color":"gui-toggle.activeColor","handle-color":"gui-toggle.handleColor"}})},function(t,e,i){"use strict";var o=document.querySelector("#cursor");o&&o.addEventListener("stateremoved",function(t){"cursor-fusing"===t.detail.state&&(AFRAME.utils.entity.setComponentProperty(this,"geometry.thetaLength",360),AFRAME.utils.entity.setComponentProperty(this,"material.color",key_white),AFRAME.utils.entity.setComponentProperty(this,"scale","1 1 1"))})},function(t,e,i){"use strict";if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");i(0),i(10),i(9),i(5),i(11),i(1),i(6),i(7),i(15),i(13),i(2),i(12),i(3),i(14),i(8),i(4),i(16)}]);